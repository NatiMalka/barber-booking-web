(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{17764:(e,r,t)=>{"use strict";t.d(r,{A:()=>C});var n=t(12115),o=t(52596),a=t(50396),l=t(15386),s=t(69458),i=t(39571),c=t(35881),d=t(73746),u=t(74409),p=t(13973),x=t(82700),h=t(9670),m=t(57692),b=t(81112);function y(e){return(0,b.Ay)("MuiLink",e)}let A=(0,m.A)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var v=t(37402);let g=e=>{let{theme:r,ownerState:t}=e,n=t.color,o=(0,v.Yn)(r,"palette.".concat(n,".main"),!1)||(0,v.Yn)(r,"palette.".concat(n),!1)||t.color,l=(0,v.Yn)(r,"palette.".concat(n,".mainChannel"))||(0,v.Yn)(r,"palette.".concat(n,"Channel"));return"vars"in r&&l?"rgba(".concat(l," / 0.4)"):(0,a.X4)(o,.4)};var j=t(95155);let f={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},w=e=>{let{classes:r,component:t,focusVisible:n,underline:o}=e,a={root:["root","underline".concat((0,i.A)(o)),"button"===t&&"button",n&&"focusVisible"]};return(0,l.A)(a,y,r)},k=(0,c.Ay)(h.A,{name:"MuiLink",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.root,r["underline".concat((0,i.A)(t.underline))],"button"===t.component&&r.button]}})((0,u.A)(e=>{let{theme:r}=e;return{variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:e=>{let{underline:r,ownerState:t}=e;return"always"===r&&"inherit"!==t.color},style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(r.palette).filter((0,p.A)()).map(e=>{let[t]=e;return{props:{underline:"always",color:t},style:{"--Link-underlineColor":r.vars?"rgba(".concat(r.vars.palette[t].mainChannel," / 0.4)"):(0,a.X4)(r.palette[t].main,.4)}}}),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":r.vars?"rgba(".concat(r.vars.palette.text.primaryChannel," / 0.4)"):(0,a.X4)(r.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":r.vars?"rgba(".concat(r.vars.palette.text.secondaryChannel," / 0.4)"):(0,a.X4)(r.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(r.vars||r).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(A.focusVisible)]:{outline:"auto"}}}]}})),C=n.forwardRef(function(e,r){let t=(0,x.b)({props:e,name:"MuiLink"}),a=(0,d.A)(),{className:l,color:i="primary",component:c="a",onBlur:u,onFocus:p,TypographyClasses:h,underline:m="always",variant:b="inherit",sx:y,...A}=t,[v,C]=n.useState(!1),S={...t,color:i,component:c,focusVisible:v,underline:m,variant:b},L=w(S);return(0,j.jsx)(k,{color:i,className:(0,o.A)(L.root,l),classes:h,component:c,onBlur:e=>{(0,s.A)(e.target)||C(!1),u&&u(e)},onFocus:e=>{(0,s.A)(e.target)&&C(!0),p&&p(e)},ref:r,ownerState:S,variant:b,...A,sx:[...void 0===f[i]?[{color:i}]:[],...Array.isArray(y)?y:[y]],style:{...A.style,..."always"===m&&"inherit"!==i&&!f[i]&&{"--Link-underlineColor":g({theme:a,ownerState:S})}}})})},20580:(e,r,t)=>{Promise.resolve().then(t.bind(t,41665))},41665:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>V});var n=t(95155),o=t(12115),a=t(63159),l=t(81063),s=t(9670),i=t(54265),c=t(52269),d=t(55857),u=t(80158),p=t(31092),x=t(70680),h=t(44146),m=t(17764),b=t(62861),y=t(62966),A=t(12422),v=t(78679),g=t(52701),j=t(60392),f=t(76856);let w=(0,f.A)((0,n.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"}),"Lock"),k=(0,f.A)((0,n.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff"),C=(0,f.A)((0,n.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility");var S=t(62177),L=t(48707),I=t(35695),z=t(6874),M=t.n(z);function V(){let[e,r]=(0,o.useState)(!1),[t,f]=(0,o.useState)(null),[z,V]=(0,o.useState)(!1),[W,D]=(0,o.useState)(!1),[N,_]=(0,o.useState)(""),[E,B]=(0,o.useState)(null),H=(0,I.useRouter)(),{control:P,handleSubmit:R,formState:{errors:O}}=(0,S.mN)({defaultValues:{email:"",password:""}}),T=async e=>{f(null),V(!0);try{await (0,L.Lx)(e.email,e.password),H.push("/")}catch(e){console.error("Login error:",e),f(e instanceof Error?e.message:"שגיאה בהתחברות. אנא נסה שנית.")}finally{V(!1)}},X=()=>{r(!e)},Y=()=>{D(!1),_(""),B(null)};return(0,n.jsxs)(a.A,{maxWidth:"sm",sx:{py:8},children:[(0,n.jsxs)(l.A,{elevation:3,sx:{p:4,borderRadius:2},children:[(0,n.jsx)(s.A,{variant:"h4",component:"h1",gutterBottom:!0,textAlign:"center",color:"primary",fontWeight:"bold",children:"התחברות"}),t&&(0,n.jsx)(i.A,{severity:"error",sx:{mb:3},children:t}),(0,n.jsx)(c.default,{sx:{mb:4},children:(0,n.jsx)(d.A,{variant:"contained",color:"secondary",fullWidth:!0,size:"large",startIcon:(0,n.jsx)(g.A,{}),onClick:()=>{D(!0)},sx:{py:1.5,fontSize:"1.1rem"},children:"כניסה לספר"})}),(0,n.jsx)(u.A,{sx:{my:3},children:(0,n.jsx)(s.A,{variant:"body2",color:"text.secondary",children:"או התחבר כלקוח"})}),(0,n.jsxs)("form",{onSubmit:R(T),children:[(0,n.jsx)(c.default,{sx:{mb:3},children:(0,n.jsx)(S.xI,{name:"email",control:P,rules:{required:"שדה חובה",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"כתובת אימייל לא תקינה"}},render:e=>{var r;let{field:t}=e;return(0,n.jsx)(p.A,{...t,label:"אימייל",fullWidth:!0,error:!!O.email,helperText:null===(r=O.email)||void 0===r?void 0:r.message,InputProps:{startAdornment:(0,n.jsx)(x.A,{position:"start",children:(0,n.jsx)(j.A,{})})}})}})}),(0,n.jsx)(c.default,{sx:{mb:3},children:(0,n.jsx)(S.xI,{name:"password",control:P,rules:{required:"שדה חובה"},render:r=>{var t;let{field:o}=r;return(0,n.jsx)(p.A,{...o,label:"סיסמה",type:e?"text":"password",fullWidth:!0,error:!!O.password,helperText:null===(t=O.password)||void 0===t?void 0:t.message,InputProps:{startAdornment:(0,n.jsx)(x.A,{position:"start",children:(0,n.jsx)(w,{})}),endAdornment:(0,n.jsx)(x.A,{position:"end",children:(0,n.jsx)(h.A,{"aria-label":"toggle password visibility",onClick:X,edge:"end",children:e?(0,n.jsx)(k,{}):(0,n.jsx)(C,{})})})}})}})}),(0,n.jsx)(c.default,{sx:{mb:2},children:(0,n.jsx)(d.A,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,size:"large",disabled:z,children:z?"מתחבר...":"התחבר"})}),(0,n.jsx)(c.default,{sx:{textAlign:"center"},children:(0,n.jsx)(m.A,{component:M(),href:"/auth/forgot-password",variant:"body2",children:"שכחת סיסמה?"})})]})]}),(0,n.jsxs)(b.A,{open:W,onClose:Y,children:[(0,n.jsx)(y.A,{children:(0,n.jsx)(s.A,{variant:"h6",align:"center",children:"כניסת ספר"})}),(0,n.jsxs)(A.A,{children:[E&&(0,n.jsx)(i.A,{severity:"error",sx:{mb:2},children:E}),(0,n.jsx)(p.A,{autoFocus:!0,margin:"dense",label:"סיסמה",type:"password",fullWidth:!0,value:N,onChange:e=>{_(e.target.value)},InputProps:{startAdornment:(0,n.jsx)(x.A,{position:"start",children:(0,n.jsx)(w,{})})}})]}),(0,n.jsxs)(v.A,{children:[(0,n.jsx)(d.A,{onClick:Y,children:"ביטול"}),(0,n.jsx)(d.A,{onClick:()=>{if("admin123"===N)try{localStorage.setItem("isBarberAdmin","true"),console.log("Barber admin set in localStorage:",localStorage.getItem("isBarberAdmin")),Y(),setTimeout(()=>{H.push("/admin/dashboard")},100)}catch(e){console.error("Error setting barber admin in localStorage:",e),B("אירעה שגיאה בהתחברות. אנא נסה שנית.")}else B("סיסמה שגויה. אנא נסה שנית.")},variant:"contained",color:"primary",children:"כניסה"})]})]})]})}},48707:(e,r,t)=>{"use strict";t.d(r,{Lx:()=>a,N6:()=>s,y4:()=>l});var n=t(16203),o=t(77651);let a=async(e,r)=>{try{return(await (0,n.x9)(o.j,e,r)).user}catch(e){throw console.error("Error logging in:",e),e}},l=async()=>{try{return await (0,n.CI)(o.j),!0}catch(e){throw console.error("Error logging out:",e),e}},s=e=>{var r;return!!e&&((null===(r=e.email)||void 0===r?void 0:r.includes("admin"))||!1)}},77651:(e,r,t)=>{"use strict";t.d(r,{db:()=>s,j:()=>i});var n=t(23915),o=t(35317),a=t(16203);let l=(0,n.Wp)({apiKey:"AIzaSyDWNHL-dQZayHhVS51U1z_0u1V1uLKtzkA",authDomain:"barber-booking-bf41f.firebaseapp.com",projectId:"barber-booking-bf41f",storageBucket:"barber-booking-bf41f.firebasestorage.app",messagingSenderId:"265481537358",appId:"1:265481537358:web:93c5b6f36e8258dc5e401f"}),s=(0,o.aU)(l),i=(0,a.xI)(l)}},e=>{var r=r=>e(e.s=r);e.O(0,[992,888,881,555,874,296,14,999,441,684,358],()=>r(20580)),_N_E=e.O()}]);
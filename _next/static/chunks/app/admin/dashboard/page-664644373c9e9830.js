(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{35406:(e,l,r)=>{Promise.resolve().then(r.bind(r,85738))},48707:(e,l,r)=>{"use strict";r.d(l,{Lx:()=>i,N6:()=>t,y4:()=>a});var s=r(16203),n=r(77651);let i=async(e,l)=>{try{return(await (0,s.x9)(n.j,e,l)).user}catch(e){throw console.error("Error logging in:",e),e}},a=async()=>{try{return await (0,s.CI)(n.j),!0}catch(e){throw console.error("Error logging out:",e),e}},t=e=>{var l;return!!e&&((null===(l=e.email)||void 0===l?void 0:l.includes("admin"))||!1)}},66681:(e,l,r)=>{"use strict";r.d(l,{A:()=>t});var s=r(12115),n=r(16203),i=r(77651),a=r(48707);function t(){let[e,l]=(0,s.useState)({user:null,loading:!0,isAdmin:!1});return(0,s.useEffect)(()=>{let e=(()=>{try{return"true"===localStorage.getItem("isBarberAdmin")}catch(e){return console.error("Error accessing localStorage:",e),!1}})();e&&l(e=>({...e,isAdmin:!0,loading:!1}));let r=(0,n.hg)(i.j,r=>{let s=e||(0,a.N6)(r);console.log("Auth state changed:",{user:null==r?void 0:r.email,isBarberAdmin:e,isUserAdmin:(0,a.N6)(r),adminStatus:s}),l({user:r,loading:!1,isAdmin:s})});return()=>r()},[]),e}},85738:(e,l,r)=>{"use strict";r.r(l),r.d(l,{default:()=>ep});var s=r(95155),n=r(12115),i=r(52269),a=r(89915),t=r(63159),o=r(54265),c=r(9670),d=r(50514),x=r(44146),h=r(75236),u=r(80460),j=r(3951),A=r(81063),m=r(84256),p=r(83339),y=r(31092),g=r(70680),f=r(95183),b=r(50095),v=r(86223),C=r(20071),w=r(95439),k=r(72311),S=r(34152),E=r(16537),z=r(67569),I=r(62861),D=r(62966),M=r(12422),W=r(42921),B=r(78679),F=r(55857),H=r(51528),L=r(65667),N=r(28132),R=r(84092),T=r(58218),_=r(26348),P=r(18478),O=r(38870),U=r(63155),Z=r(364),q=r(43927),G=r(90910),J=r(85396),K=r(78494),Q=r(60392),V=r(71023),X=r(40182),Y=r(45833),$=r(18260),ee=r(18490),el=r(49339),er=r(66681),es=r(35695),en=r(89618),ei=r(55592),ea=r(76898),et=r(9520),eo=r(83397),ec=r(15843),ed=r(1384),ex=r(50116);function eh(e){let{onRefresh:l}=e,[r,t]=(0,n.useState)([]),[d,h]=(0,n.useState)(!1),[u,A]=(0,n.useState)(null),[m,p]=(0,n.useState)(!1),[g,f]=(0,n.useState)(null),[b,v]=(0,n.useState)(null),[E,z]=(0,n.useState)(""),[H,L]=(0,n.useState)(!0),[N,R]=(0,n.useState)([]),[T,_]=(0,n.useState)(!1),[P,O]=(0,n.useState)(null),U=(0,n.useCallback)(async()=>{try{h(!0);let e=await (0,ex.gB)();t(e)}catch(e){console.error("Error loading vacation days:",e),A("אירעה שגיאה בטעינת ימי החופשה. אנא נסה שנית.")}finally{h(!1)}},[]);(0,n.useEffect)(()=>{U()},[U]);let Z=(0,n.useCallback)(e=>{e?(f(e),v(e.date),z(e.reason||""),L(e.isFullDay),R(e.unavailableHours||[])):(f(null),v(new Date),z(""),L(!0),R([])),p(!0)},[]),q=(0,n.useCallback)(()=>{p(!1)},[]),G=(0,n.useCallback)(async()=>{if(!b){A("יש לבחור תאריך");return}try{h(!0);let e={date:b,reason:E,isFullDay:H,unavailableHours:N};g?await (0,ex.pD)(g.id,e):await (0,ex.Zh)(e),await U(),l&&l(),q()}catch(e){console.error("Error saving vacation day:",e),A("אירעה שגיאה בשמירת יום החופשה. אנא נסה שנית.")}finally{h(!1)}},[b,E,H,N,g,U,l,q]),J=(0,n.useCallback)(e=>{O(e),_(!0)},[]),K=(0,n.useCallback)(()=>{_(!1),O(null)},[]),Q=(0,n.useCallback)(async()=>{if(P)try{h(!0),await (0,ex.xg)(P),await U(),l&&l(),K()}catch(e){console.error("Error deleting vacation day:",e),A("אירעה שגיאה במחיקת יום החופשה. אנא נסה שנית.")}finally{h(!1)}},[P,U,l,K]),X=(0,n.useCallback)(e=>{R(l=>l.includes(e)?l.filter(l=>l!==e):[...l,e])},[]),Y=(0,n.useMemo)(()=>["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30"],[]),$=(0,n.useCallback)(e=>(0,ee.A)(e,"yyyy-MM-dd"),[]),er=(0,n.useCallback)(e=>{let l=e.target.value;l?v(new Date(l)):v(null)},[]),es=(0,n.useCallback)(e=>{z(e.target.value)},[]),en=(0,n.useCallback)(e=>{L(e.target.checked)},[]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,s.jsxs)(c.A,{variant:"h6",gutterBottom:!0,sx:{mb:0,display:"flex",alignItems:"center"},children:[(0,s.jsx)(eo.A,{sx:{mr:1}})," ניהול ימי חופשה"]}),(0,s.jsx)(F.A,{variant:"contained",color:"primary",startIcon:(0,s.jsx)(ec.A,{}),onClick:()=>Z(),children:"הוסף יום חופשה"})]}),u&&(0,s.jsx)(o.A,{severity:"error",sx:{mb:3},children:u}),d?(0,s.jsx)(i.default,{sx:{display:"flex",justifyContent:"center",p:3},children:(0,s.jsx)(a.A,{})}):0===r.length?(0,s.jsx)(o.A,{severity:"info",children:"לא נמצאו ימי חופשה עתידיים."}):(0,s.jsx)(w.A,{children:r.map(e=>(0,s.jsxs)(k.Ay,{divider:!0,secondaryAction:(0,s.jsxs)(i.default,{children:[(0,s.jsx)(x.A,{edge:"end","aria-label":"edit",onClick:()=>Z(e),sx:{mr:1},children:(0,s.jsx)(ed.A,{})}),(0,s.jsx)(x.A,{edge:"end","aria-label":"delete",onClick:()=>J(e.id),children:(0,s.jsx)(V.A,{})})]}),children:[(0,s.jsx)(ei.A,{children:(0,s.jsx)(eo.A,{color:"error"})}),(0,s.jsx)(S.A,{primary:(0,s.jsxs)(i.default,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(c.A,{variant:"body1",fontWeight:"bold",children:(0,ee.A)(e.date,"EEEE, d בMMMM yyyy",{locale:el.A})}),(0,s.jsx)(C.A,{label:e.isFullDay?"יום שלם":"שעות מסוימות",color:e.isFullDay?"error":"warning",size:"small",sx:{ml:1}})]}),secondary:(0,s.jsxs)(i.default,{children:[e.reason&&(0,s.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["סיבה: ",e.reason]}),!e.isFullDay&&e.unavailableHours&&e.unavailableHours.length>0&&(0,s.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["שעות לא זמינות: ",e.unavailableHours.join(", ")]})]})})]},e.id))}),(0,s.jsxs)(I.A,{open:m,onClose:q,maxWidth:"sm",fullWidth:!0,children:[(0,s.jsx)(D.A,{children:g?"עריכת יום חופשה":"הוספת יום חופשה"}),(0,s.jsx)(M.A,{children:(0,s.jsxs)(i.default,{sx:{mt:2},children:[(0,s.jsx)(y.A,{label:"תאריך",type:"date",value:b?$(b):"",onChange:er,fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),(0,s.jsx)(y.A,{label:"סיבה (אופציונלי)",value:E,onChange:es,fullWidth:!0,margin:"normal"}),(0,s.jsx)(ea.A,{control:(0,s.jsx)(et.A,{checked:H,onChange:en,color:"primary"}),label:"יום חופשה מלא",sx:{mt:2,mb:1}}),!H&&(0,s.jsxs)(i.default,{sx:{mt:2},children:[(0,s.jsx)(c.A,{variant:"subtitle2",gutterBottom:!0,children:"בחר שעות לא זמינות:"}),(0,s.jsx)(j.Ay,{container:!0,spacing:1,children:Y.map(e=>(0,s.jsx)(j.Ay,{item:!0,children:(0,s.jsx)(C.A,{label:e,color:N.includes(e)?"primary":"default",onClick:()=>X(e),sx:{m:.5}})},e))})]})]})}),(0,s.jsxs)(B.A,{children:[(0,s.jsx)(F.A,{onClick:q,color:"primary",children:"ביטול"}),(0,s.jsx)(F.A,{onClick:G,color:"primary",variant:"contained",children:"שמור"})]})]}),(0,s.jsxs)(I.A,{open:T,onClose:K,children:[(0,s.jsx)(D.A,{children:"מחיקת יום חופשה"}),(0,s.jsx)(M.A,{children:(0,s.jsx)(W.A,{children:"האם אתה בטוח שברצונך למחוק את יום החופשה? פעולה זו אינה ניתנת לביטול."})}),(0,s.jsxs)(B.A,{children:[(0,s.jsx)(F.A,{onClick:K,color:"primary",children:"ביטול"}),(0,s.jsx)(F.A,{onClick:Q,color:"error",variant:"contained",children:"מחק"})]})]})]})}let eu={haircut:{name:"תספורת גבר/ ילד",price:50},beard:{name:"סידור זקן",price:25},sideBurn:{name:"סידור קו",price:20},styling:{name:"איזורי שעווה אף/אוזניים/לחיים/גבות",price:15},coloring:{name:"גוונים",price:180},fullPackage:{name:"צבע מלא",price:220}},ej={pending:"warning",approved:"success",rejected:"error",cancelled:"default"},eA={pending:"ממתין לאישור",approved:"מאושר",rejected:"נדחה",cancelled:"בוטל"},em=e=>{var l;return e.services&&e.services.length>0?e.services.reduce((e,l)=>{var r;return e+((null===(r=eu[l])||void 0===r?void 0:r.price)||0)},0):(null===(l=eu[e.service])||void 0===l?void 0:l.price)||0};function ep(){let[e,l]=(0,n.useState)(0),[r,ei]=(0,n.useState)(0),[ea,et]=(0,n.useState)([]),[eo,ec]=(0,n.useState)(!0),[ed,ex]=(0,n.useState)(""),[ep,ey]=(0,n.useState)(!1),[eg,ef]=(0,n.useState)(null),[eb,ev]=(0,n.useState)(null),[eC,ew]=(0,n.useState)(null),[ek,eS]=(0,n.useState)(null),[eE,ez]=(0,n.useState)("all"),{user:eI,isAdmin:eD,loading:eM}=(0,er.A)(),eW=(0,es.useRouter)();(0,n.useEffect)(()=>{if(!eM&&!eD){eW.push("/auth/login");return}!eM&&eD&&eB()},[eM,eD,eW]);let eB=async()=>{try{ec(!0);let e=await (0,en.Ih)();et(e)}catch(e){console.error("Error fetching appointments:",e)}finally{ec(!1)}},eF=e=>{ez(e)},eH=async(e,l)=>{try{ev(e),await (0,en.H8)(e,l),et(r=>r.map(r=>r.id===e?{...r,status:l}:r))}catch(e){console.error("Error updating appointment status:",e)}finally{ev(null)}},eL=(0,n.useCallback)(()=>ea.filter(l=>{if(1===e&&"pending"!==l.status||2===e&&"approved"!==l.status||3===e&&"rejected"!==l.status)return!1;if("all"!==eE){let e=l.date instanceof Date?l.date:new Date(l.date),r=new Date;if(r.setHours(0,0,0,0),"today"===eE&&!(0,X.A)(e)||"upcoming"===eE&&!(0,Y.A)(e,r)||"past"===eE&&!(0,$.A)(e,r))return!1}if(ed){var r,s,n;let e=ed.toLowerCase(),i=null===(r=l.name)||void 0===r?void 0:r.toLowerCase().includes(e),a=null===(s=l.phone)||void 0===s?void 0:s.toLowerCase().includes(e),t=null===(n=l.email)||void 0===n?void 0:n.toLowerCase().includes(e);return i||a||t}return!0}),[ea,e,eE,ed]);if(eM||eo)return(0,s.jsx)(i.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:(0,s.jsx)(a.A,{})});if(!eD)return(0,s.jsx)(t.A,{maxWidth:"sm",sx:{py:8},children:(0,s.jsx)(o.A,{severity:"error",children:"אין לך הרשאות לצפות בדף זה. מועבר לדף ההתחברות..."})});let eN=ea.filter(e=>"pending"===e.status).length,eR=ea.filter(e=>"approved"===e.status).length,eT=ea.filter(e=>!!e.date&&(0,X.A)(new Date(e.date))).length,e_=eL();return(0,s.jsxs)(t.A,{maxWidth:"lg",sx:{py:4},children:[(0,s.jsxs)(i.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[(0,s.jsx)(c.A,{variant:"h4",component:"h1",color:"primary",fontWeight:"bold",children:"לוח בקרה"}),(0,s.jsxs)(i.default,{children:[(0,s.jsx)(d.A,{title:"נקה קאש ורענן",children:(0,s.jsx)(x.A,{onClick:()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()},color:"secondary",sx:{mr:1},children:(0,s.jsx)(H.A,{})})}),(0,s.jsx)(d.A,{title:"רענן נתונים",children:(0,s.jsx)(x.A,{onClick:()=>{eB()},color:"primary",children:(0,s.jsx)(L.A,{})})})]})]}),(0,s.jsx)(i.default,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:(0,s.jsxs)(h.A,{value:r,onChange:(e,l)=>{ei(l)},"aria-label":"main dashboard tabs",children:[(0,s.jsx)(u.A,{label:"ניהול תורים"}),(0,s.jsx)(u.A,{label:"ניהול ימי חופשה"})]})}),(0,s.jsx)(j.Ay,{container:!0,spacing:3,sx:{mb:4},children:(0,s.jsx)(j.Ay,{item:!0,xs:12,md:8,children:(0,s.jsxs)(A.A,{elevation:3,sx:{p:3,borderRadius:2,height:"100%"},children:[(0,s.jsxs)(c.A,{variant:"h6",gutterBottom:!0,sx:{mb:2,display:"flex",alignItems:"center"},children:[(0,s.jsx)(N.A,{sx:{mr:1}})," סקירה כללית"]}),(0,s.jsxs)(j.Ay,{container:!0,spacing:2,children:[(0,s.jsx)(j.Ay,{item:!0,xs:6,sm:3,children:(0,s.jsx)(m.A,{sx:{bgcolor:"primary.light",color:"primary.contrastText"},children:(0,s.jsxs)(p.A,{children:[(0,s.jsx)(c.A,{variant:"h5",fontWeight:"bold",children:ea.length}),(0,s.jsx)(c.A,{variant:"body2",children:'סה"כ תורים'})]})})}),(0,s.jsx)(j.Ay,{item:!0,xs:6,sm:3,children:(0,s.jsx)(m.A,{sx:{bgcolor:"warning.light",color:"warning.contrastText"},children:(0,s.jsxs)(p.A,{children:[(0,s.jsx)(c.A,{variant:"h5",fontWeight:"bold",children:eN}),(0,s.jsx)(c.A,{variant:"body2",children:"ממתינים לאישור"})]})})}),(0,s.jsx)(j.Ay,{item:!0,xs:6,sm:3,children:(0,s.jsx)(m.A,{sx:{bgcolor:"success.light",color:"success.contrastText"},children:(0,s.jsxs)(p.A,{children:[(0,s.jsx)(c.A,{variant:"h5",fontWeight:"bold",children:eR}),(0,s.jsx)(c.A,{variant:"body2",children:"תורים מאושרים"})]})})}),(0,s.jsx)(j.Ay,{item:!0,xs:6,sm:3,children:(0,s.jsx)(m.A,{sx:{bgcolor:"info.light",color:"info.contrastText"},children:(0,s.jsxs)(p.A,{children:[(0,s.jsx)(c.A,{variant:"h5",fontWeight:"bold",children:eT}),(0,s.jsx)(c.A,{variant:"body2",children:"תורים היום"})]})})})]})]})})}),0===r&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(A.A,{elevation:3,sx:{p:3,borderRadius:2,mb:4},children:[(0,s.jsxs)(i.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,s.jsx)(c.A,{variant:"h6",gutterBottom:!0,sx:{mb:0},children:"ניהול תורים"}),(0,s.jsxs)(i.default,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(y.A,{placeholder:"חיפוש לפי שם או טלפון",size:"small",value:ed,onChange:e=>ex(e.target.value),InputProps:{startAdornment:(0,s.jsx)(g.A,{position:"start",children:(0,s.jsx)(R.A,{})})},sx:{mr:2}}),(0,s.jsx)(d.A,{title:"סינון לפי תאריך",children:(0,s.jsx)(x.A,{color:"primary",onClick:e=>ew(e.currentTarget),sx:{mr:1},children:(0,s.jsx)(T.A,{})})}),(0,s.jsxs)(f.A,{anchorEl:eC,open:!!eC&&!ek,onClose:()=>ew(null),children:[(0,s.jsx)(b.A,{onClick:()=>{eF("all"),ew(null)},selected:"all"===eE,children:"כל התורים"}),(0,s.jsx)(b.A,{onClick:()=>{eF("today"),ew(null)},selected:"today"===eE,children:"תורים להיום"}),(0,s.jsx)(b.A,{onClick:()=>{eF("upcoming"),ew(null)},selected:"upcoming"===eE,children:"תורים עתידיים"}),(0,s.jsx)(b.A,{onClick:()=>{eF("past"),ew(null)},selected:"past"===eE,children:"תורים שעברו"})]})]})]}),(0,s.jsx)(i.default,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:(0,s.jsxs)(h.A,{value:e,onChange:(e,r)=>{l(r)},"aria-label":"appointment tabs",children:[(0,s.jsx)(u.A,{label:"הכל"}),(0,s.jsx)(u.A,{label:(0,s.jsxs)(i.default,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)("span",{children:"ממתינים לאישור"}),eN>0&&(0,s.jsx)(v.A,{badgeContent:eN,color:"warning",max:99,sx:{ml:.5,"& .MuiBadge-badge":{position:"relative",transform:"none",fontSize:"0.7rem",padding:"0 4px",height:"16px",minWidth:"16px",borderRadius:"8px"}}})]})}),(0,s.jsx)(u.A,{label:"מאושרים"}),(0,s.jsx)(u.A,{label:"נדחו"})]})}),"all"!==eE&&(0,s.jsx)(i.default,{sx:{mb:2},children:(0,s.jsx)(C.A,{label:"today"===eE?"תורים להיום":"upcoming"===eE?"תורים עתידיים":"תורים שעברו",onDelete:()=>eF("all"),color:"primary",variant:"outlined"})}),0===e_.length?(0,s.jsx)(o.A,{severity:"info",children:"אין תורים להצגה"}):(0,s.jsx)(w.A,{children:e_.map(e=>{var l,r;let n=e.date instanceof Date?e.date:new Date(e.date);return(0,s.jsx)(A.A,{elevation:1,sx:{mb:2,borderRadius:2,borderRight:4,borderColor:"".concat(ej[e.status],".main"),overflow:"hidden"},children:(0,s.jsx)(k.Ay,{sx:{py:2,bgcolor:(0,X.A)(n)?"rgba(33, 150, 243, 0.08)":"inherit"},secondaryAction:(0,s.jsxs)(i.default,{children:["pending"===e.status&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.A,{title:"אשר תור",children:(0,s.jsx)(x.A,{color:"success",onClick:()=>eH(e.id,"approved"),disabled:eb===e.id,children:eb===e.id?(0,s.jsx)(a.A,{size:24}):(0,s.jsx)(_.A,{})})}),(0,s.jsx)(d.A,{title:"דחה תור",children:(0,s.jsx)(x.A,{color:"error",onClick:()=>eH(e.id,"rejected"),disabled:eb===e.id,children:(0,s.jsx)(P.A,{})})})]}),(0,s.jsx)(d.A,{title:"אפשרויות נוספות",children:(0,s.jsx)(x.A,{onClick:l=>{eS(e),ew(l.currentTarget)},children:(0,s.jsx)(O.A,{})})})]}),children:(0,s.jsx)(S.A,{primary:(0,s.jsxs)(i.default,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,s.jsx)(E.A,{sx:{bgcolor:"primary.main",width:40,height:40,mr:2},children:(null===(l=e.name)||void 0===l?void 0:l.charAt(0))||"?"}),(0,s.jsxs)(i.default,{children:[(0,s.jsx)(c.A,{variant:"h6",sx:{mb:0},children:e.name}),(0,s.jsx)(C.A,{label:eA[e.status],size:"small",color:ej[e.status],sx:{mr:1}}),e.services&&e.services.length>0?(0,s.jsxs)(i.default,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:.5},children:[e.services.map(e=>{var l;return(0,s.jsx)(C.A,{label:(null===(l=eu[e])||void 0===l?void 0:l.name)||e,size:"small",variant:"outlined",icon:(0,s.jsx)(U.A,{sx:{fontSize:"0.8rem"}})},e)}),(0,s.jsx)(C.A,{label:"סה״כ: ₪".concat(em(e)),size:"small",color:"primary"})]}):(0,s.jsx)(C.A,{label:(null===(r=eu[e.service])||void 0===r?void 0:r.name)||e.service,size:"small",variant:"outlined",icon:(0,s.jsx)(U.A,{sx:{fontSize:"0.8rem"}})})]})]}),secondary:(0,s.jsxs)(j.Ay,{container:!0,spacing:2,sx:{mt:1},children:[(0,s.jsx)(j.Ay,{item:!0,xs:12,sm:6,children:(0,s.jsx)(z.A,{direction:"row",spacing:2,children:(0,s.jsxs)(i.default,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(Z.A,{fontSize:"small",color:"primary",sx:{mr:.5}}),(0,s.jsx)(c.A,{variant:"body2",children:(0,ee.A)(n,"EEEE, d בMMMM yyyy",{locale:el.A})})]})})}),(0,s.jsx)(j.Ay,{item:!0,xs:12,sm:6,children:(0,s.jsxs)(z.A,{direction:"row",spacing:2,children:[(0,s.jsxs)(i.default,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(q.A,{fontSize:"small",color:"primary",sx:{mr:.5}}),(0,s.jsx)(c.A,{variant:"body2",children:e.time})]}),(0,s.jsxs)(i.default,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(G.A,{fontSize:"small",color:"primary",sx:{mr:.5}}),(0,s.jsx)(c.A,{variant:"body2",children:"whatsapp"===e.notificationMethod?"וואטסאפ":"sms"===e.notificationMethod?"SMS":"אימייל"})]})]})}),(0,s.jsx)(j.Ay,{item:!0,xs:12,children:(0,s.jsxs)(z.A,{direction:"row",spacing:1,children:[(0,s.jsx)(d.A,{title:"התקשר",children:(0,s.jsx)(x.A,{size:"small",color:"primary",onClick:()=>window.open("tel:".concat(e.phone)),children:(0,s.jsx)(J.A,{fontSize:"small"})})}),(0,s.jsx)(d.A,{title:"שלח וואטסאפ",children:(0,s.jsx)(x.A,{size:"small",color:"success",onClick:()=>window.open("https://wa.me/".concat(e.phone.replace(/\D/g,""))),children:(0,s.jsx)(K.A,{fontSize:"small"})})}),e.email&&(0,s.jsx)(d.A,{title:"שלח אימייל",children:(0,s.jsx)(x.A,{size:"small",color:"info",onClick:()=>window.open("mailto:".concat(e.email)),children:(0,s.jsx)(Q.A,{fontSize:"small"})})}),(0,s.jsx)(c.A,{variant:"body2",color:"text.secondary",sx:{ml:1},children:e.phone})]})}),e.notes&&(0,s.jsx)(j.Ay,{item:!0,xs:12,children:(0,s.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:[(0,s.jsx)("strong",{children:"הערות:"})," ",e.notes]})})]})})})},e.id)})})]})}),1===r&&(0,s.jsx)(eh,{}),(0,s.jsx)(f.A,{anchorEl:eC,open:!!eC&&!!ek,onClose:()=>{ew(null),eS(null)},children:(0,s.jsxs)(b.A,{onClick:()=>{ek&&(ef(ek.id),ey(!0)),ew(null),eS(null)},sx:{color:"error.main"},children:[(0,s.jsx)(V.A,{fontSize:"small",sx:{mr:1}}),"מחק תור"]})}),(0,s.jsxs)(I.A,{open:ep,onClose:()=>ey(!1),children:[(0,s.jsx)(D.A,{children:"מחיקת תור"}),(0,s.jsx)(M.A,{children:(0,s.jsx)(W.A,{children:"האם אתה בטוח שברצונך למחוק את התור? פעולה זו אינה ניתנת לביטול."})}),(0,s.jsxs)(B.A,{children:[(0,s.jsx)(F.A,{onClick:()=>ey(!1),color:"primary",children:"ביטול"}),(0,s.jsx)(F.A,{onClick:async()=>{if(eg)try{await (0,en.d3)(eg),et(e=>e.filter(e=>e.id!==eg)),ey(!1),ef(null)}catch(e){console.error("Error deleting appointment:",e)}},color:"error",children:"מחק"})]})]})]})}}},e=>{var l=l=>e(e.s=l);e.O(0,[992,888,881,555,990,296,617,999,160,595,441,684,358],()=>l(35406)),_N_E=e.O()}]);